
situation_road_to_collapse = {
	picture = GFX_evt_alien_propaganda
	category = negative

	fail_icon = GFX_situation_outcome_meh
	fail_icon_frame = GFX_situation_outcome_frame_green
	complete_icon = GFX_situation_outcome_revolt
	complete_icon_frame = GFX_situation_outcome_frame_red

	on_start = {
		
	}

	on_progress_complete = {
		owner = {
			country_event = {
				id = red_origin.1991
			}
		}
		destroy_situation = this
	}

	on_fail = {
		
	}

	on_abort = {
		
	}

	abort_trigger = {
		NOT = {
			owner = { #otherwise, that event flips ownership, which immediately invalidates the Situation
				has_active_event = { unrest.4200 }
			}
		}
		OR = {
			NOT = { exists = target.owner }
			target.owner = { NOT = { is_same_value = root.owner } }
			target.controller = { NOT = { is_same_value = root.owner } }
		}
	}

	start_value = 0

	stages = {
		revolt_severity_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_red
			modifier = {
				planet_jobs_produces_mult = -0.05
			}
			end = 30
		}
		revolt_severity_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			#附属国寻求改革和独立
			on_first_enter = {
			}
			modifier = {
				planet_jobs_produces_mult = -0.1
				planet_jobs_unity_produces_mult = -0.2
				pop_happiness = -0.05
			}
			end = 60
		}
		revolt_severity_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			#抗议兴起
			on_first_enter = {
			}
			modifier = {
				planet_jobs_produces_mult = -0.15
				planet_jobs_unity_produces_mult = -0.35
				pop_happiness = -0.1
			}
			end = 90
		}
		revolt_severity_4 = {
			icon = GFX_situation_stage_4
			icon_background = GFX_situation_stage_frame_red
			#八一九与波罗的海国家独立
			on_first_enter = {
			}
			modifier = {
				planet_jobs_produces_mult = -0.35
				planet_jobs_unity_produces_mult = -0.95
				pop_happiness = -0.25
				planet_stability_add = -50
			}
			end = 100
		}
	}

	approach = {
		name = approach_revolt_do_nothing
		icon = GFX_situation_approach_this_is_fine
		icon_background = GFX_situation_approach_bg_yellow
		default = yes
		on_select = {
			custom_tooltip = deficit_approach_do_nothing_tooltip
		}
		ai_weight = {
			base = 2
		}
	}

	on_monthly = {
		random_events = {
			100 = 0
		}
	}

	#Note: if you alter this, you should consider whether to alter potential_revolt_situation_monthly_progress_estimation too
	monthly_progress = {
		base = 0
		complex_trigger_modifier = {
			desc = STRING_UNHAPPY_1
			trigger = count_owned_pop
			trigger_scope = owner
			parameters = {
				limit = {
					happiness < 50
					happiness > 25
				}
			}
			mode = add
			mult = 0.001
		}
		complex_trigger_modifier = {
			desc = STRING_UNHAPPY_2
			trigger = count_owned_pop
			trigger_scope = owner
			parameters = {
				limit = {
					happiness < 25
					happiness > 0
				}
			}
			mode = add
			mult = 0.002
		}
		complex_trigger_modifier = {
			desc = STRING_UNHAPPY_3
			trigger = count_owned_pop
			trigger_scope = owner
			parameters = {
				limit = {
					happiness = 0
				}
			}
			mode = add
			mult = 0.005
		}
		complex_trigger_modifier = {
			desc = STRING_UNEMPLOYMENT
			trigger = num_unemployed
			trigger_scope = owner
			mode = add
			mult = 0.01
		}
		modifier = {
			add = 0.5
			desc = STRING_ENERGY_DEFICIT
			owner = {
				has_deficit = energy
			}
		}
		modifier = {
			add = 0.3
			desc = STRING_MINERALS_DEFICIT
			owner = {
				has_deficit = minerals
			}
		}
		modifier = {
			add = 1
			desc = STRING_FOOD_DEFICIT
			owner = {
				has_deficit = food
			}
		}
		modifier = {
			add = 1
			desc = STRING_CONSUMER_GOODS_DEFICIT
			owner = {
				has_deficit = consumer_goods
			}
		}
		modifier = {
			add = 0.2
			desc = STRING_ALLOYS_DEFICIT
			owner = {
				has_deficit = alloys
			}
		}
		modifier = {
			add = 1
			desc = STRING_UNITY_DEFICIT
			owner = {
				has_deficit = unity
			}
		}
		modifier = {
			add = 10
			desc = STRING_COUNTRY_DEFAULTED
			owner = {
				has_modifier = country_defaulted
			}
		}
		complex_trigger_modifier = {
			trigger = count_owned_planet
			trigger_scope = owner
			parameters = {
				limit = {
					is_colony = yes
					planet_stability < @stabilitylevel2
					num_pops > 5
				}
			}
			desc = STRING_REBELLIOUS_PLANETS_IN_COUNTRY
			mode = add
			mult = 0.1
		}
	}
}