situation_economic_circle = {
    picture = GFX_evt_dark_alley
    category = positive
    desc=ethic_economic_circle_desc
    on_start = {
	}
	on_abort = {
        set_global_flag=ETHIC_NOT_START_ECONOMIC_CRISIS
	}
    on_fail = {
		custom_tooltip = deficit_situation_finish_tooltip
		hidden_effect = { destroy_situation = this }
        set_global_flag=ETHIC_NOT_START_ECONOMIC_CRISIS
	}
    start_value = 0
    stages = {
        circle_1 = {
            icon = GFX_situation_stage_1
            icon_background = GFX_situation_stage_frame_blue
			end = 10
            on_first_enter = {
				situation_event = { id = ethic_economic.101 }
			}
            hidden_effect={
                owner={
                    set_country_flag=ETHIC_ECONOMIC_STAGE_1
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_2
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_3
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_4
                }
            }
			modifier = {
				trade_value_mult = 0.10
                pop_happiness = 0.05

                job_merchant_per_pop=0.03
			}
        }
        circle_2 = {
            icon = GFX_situation_stage_2
            icon_background = GFX_situation_stage_frame_green
            end = 40
            on_first_enter = {
				situation_event = { id = ethic_economic.102 }
			}
            hidden_effect={
                owner={
                    set_country_flag=ETHIC_ECONOMIC_STAGE_2
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_1
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_3
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_4
                }
            }
            modifier = {
                trade_value_mult = 0.75
                planet_crime_mult = 0.10
                planet_stability_add = -5
                diplo_weight_economy_mult = 0.25

                job_merchant_per_pop=0.07
                job_clerk_per_pop=0.10
            }
        }
        circle_3 = {
            icon = GFX_situation_stage_3
            icon_background = GFX_situation_stage_frame_green
            end = 90
            on_first_enter = {
				situation_event = { id = ethic_economic.103 }
			}
            hidden_effect={
                owner={
                    set_country_flag=ETHIC_ECONOMIC_STAGE_3
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_2
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_1
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_4
                }
            }
            modifier = {
                
                trade_value_mult = 0.50
                planet_crime_mult = 0.10
                planet_crime_add = 10
                planet_stability_add = -10 
                planet_jobs_produces_mult = -0.05

                job_mogul_per_pop=0.05
                job_merchant_per_pop=0.10
                job_clerk_per_pop=0.14
            }
        }
        circle_4 = {
            icon = GFX_situation_stage_4
            icon_background = GFX_situation_stage_frame_red
            end = 100
            on_first_enter = {
				situation_event = { id = ethic_economic.104 }
			}
            hidden_effect={
                owner={
                    set_country_flag=ETHIC_ECONOMIC_STAGE_4
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_2
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_3
                    remove_country_flag=ETHIC_ECONOMIC_STAGE_1
                }
            }
            modifier = {
                trade_value_mult = -1.75
                planet_crime_mult = 0.50
                planet_crime_add = 50
                planet_stability_add = -30 
                planet_jobs_produces_mult = -0.50

                job_merchant_per_pop=-0.20
                job_clerk_per_pop=-0.33
                job_mogul_per_pop=-0.07

                country_unity_produces_mult=-0.50
                pop_cat_slave_happiness=-0.60
                pop_cat_worker_happiness=-0.40
                pop_cat_specialist_happiness=-0.20
            }
        }
    }
        on_monthly = {
	    	events = {
                ethic_economic.1
            }
	    }

        monthly_progress = {
            base = 0
######################思潮
            modifier = {
                desc = ethic_economic_government
                add = 0.6
                exists = owner
                owner = {
                    OR = {
                        has_ethic=ethic_capitalism
                        has_ethic=ethic_fanatic_capitalism
                    }
                    NOT = {has_valid_civic=civic_characteristic_socialism}
                }
            } #资基础0.6
            modifier = {
                desc = ethic_economic_government
                add = 0.3
                exists = owner
                owner = {
                    NOR = {
                        has_ethic=ethic_capitalism
                        has_ethic=ethic_fanatic_capitalism
                    }
                    NOT = {has_valid_civic=civic_characteristic_socialism}
                }
            } #其他基础0.3
            modifier = {
                desc = ethic_economic_government
                add = 0.5
                owner = {
                    has_policy_flag=reform_and_opening_up
                }
            } #改开基础0.5
#################################国策
            modifier = {
                desc = ethic_economic_government
                add = -0.4
                owner = {
                    has_valid_civic=civic_welfare_state
                }
            } #福利国家-0.3
            modifier = {
                desc = ethic_economic_government
                add = 0.4
                owner = {
                    has_valid_civic=civic_triple_the_profit
                }
            } #三倍利润0.3
            modifier = {
                desc = ethic_economic_government
                add = -0.3
                owner = {
                    has_valid_civic=civic_anarchism
                }
            } #安那其-0.2
            modifier = {
                desc = ethic_economic_government
                add = 0.2
                owner = {
                    has_valid_civic=civic_merchant_guilds
                }
            } #金融精英0.2
            modifier = {
                desc = ethic_economic_government
                add = 0.3
                owner = {
                    has_valid_civic=civic_merchant_guilds
                }
            } #资本狂热0.25
            modifier = {
                desc = ethic_economic_government
                add = 0.1
                owner = {
                    has_valid_civic=civic_consumerism
                }
            } #奢侈消费主义0.1
            modifier = {
                desc = ethic_economic_government
                add = 0.15
                owner = {
                    has_valid_civic=civic_real_estate_market
                }
            } #房产市场0.15
            modifier = {
                desc = ethic_economic_government
                add = 0.15
                owner = {
                    has_valid_civic=civic_state_monopoly
                }
            } #房产市场0.25
############################地方权力
            modifier = {
                desc = ethic_dace_desc
                add=0.2
                owner = {
                    has_policy_flag = full_decentralization
                }
            } #完全放权 0.1
            modifier = {
                desc = ethic_dace_desc
                add=0.1
                owner = {
                    has_policy_flag = high_decentralization
                }
            } #高度放权 0.05
            modifier = {
                desc = ethic_dace_desc
                add=0
                owner = {
                    has_policy_flag = partial_decentralization
                }
            } #部分放权 0
            modifier = {
                desc = ethic_dace_desc
                add=-0.05
                owner = {
                    has_policy_flag = centralized_state
                }
            } #中央集权 -0.025
            modifier = {
                desc = ethic_dace_desc
                add=-0.10
                owner = {
                    has_policy_flag = concentration_of_power
                }
            } #高度集权 -0.05
            modifier = {
                desc = ethic_dace_desc
                add=-0.15
                owner = {
                    has_policy_flag = excessive_centralization
                }
            } #完全集权 -0.1
############################突变
            modifier = {
                desc = ethic_outside_desc
                add = -0.5
                owner = {
                    has_country_flag = ETHIC_COLONY_RECENTLY
                }
            } #每殖民一个星球-0.5*10
#           modifier = {
#               desc = ethic_outside_desc
#               add = -50
#               owner = {
#                   has_country_flag = ETHIC_WIN_WAR
#               }
#           } #某些情况下战胜-50*1个月
#           modifier = {
#               desc = ethic_outside_desc
#               add = 50
#               owner = {
#                   has_country_flag = ETHIC_LOSE_WAR
#               }
#           } #某些情况下战败-50*1个月
###################################措施
            modifier = {
                desc = ethic_freedom_desc
                add = 0.05
                owner = {
                    has_country_flag = ETHIC_FREEDOM
                }
            } #自由经济！
            modifier = {
                desc = ethic_slow_desc
                add = -0.1
                owner = {
                    has_country_flag = ETHIC_SLOW
                }
            } #受控经济！
            modifier = {
                desc = ethic_stop_desc
                add = -0.4
                owner = {
                    has_country_flag = ETHIC_STOP
                }
            } #重整经济！
#           modifier = {
#               desc = ethic_stop_desc
#               add = -5
#               owner = {
#                   has_country_flag = ETHIC_DESTROY
#               }
#           } #关闭经济周期
#############################法令
            modifier = {
                desc = ethic_economic_edicts_desc
                add = 0.01
                owner = {
                    has_edict = free_trade_act
                }
            }
            modifier = {
                desc = ethic_economic_edicts_desc
                add = 0.03
                owner = {
                    has_edict = consumerist_propaganda
                }
            }
        }
        approach = {
            name = ethic_accelerate_economic
            icon = GFX_situation_approach_this_is_fine
		    icon_background = GFX_situation_approach_bg_green
            default = yes
            modifier = {
                pop_cat_ruler_happiness=0.10
                trade_value_mult=0.20
            }
            on_select={
                custom_tooltip=ethic_accelerate_tooltip
                hidden_effect={
                    owner= {
                        remove_country_flag =ETHIC_SLOW
                        remove_country_flag =ETHIC_STOP
                        set_country_flag=ETHIC_FREEDOM
                    }
                }
            }
        }
        approach = {
            name = ethic_slow_economic
            icon = GFX_situation_approach_this_is_fine
		    icon_background = GFX_situation_approach_bg_yellow
            modifier = {
                trade_value_mult=-0.20
                edicts_unity_upkeep_mult=0.20
            }
            on_select={
                custom_tooltip=ethic_slow_tooltip
                hidden_effect={
                    owner ={
                        remove_country_flag =ETHIC_FREEDOM
                        remove_country_flag =ETHIC_STOP
                        set_country_flag=ETHIC_SLOW
                    }
                }
            }
        }
        approach = {
            name = ethic_stop_economic
            icon = GFX_situation_approach_this_is_fine
		    icon_background = GFX_situation_approach_bg_red
            modifier = {
                trade_value_mult=-0.50
                pop_happiness=-0.20
                planet_crime_add=20
            }
            on_select={
                custom_tooltip=ethic_stop_tooltip
                hidden_effect={
                    owner = {
                        remove_country_flag =ETHIC_FREEDOM
                        remove_country_flag =ETHIC_SLOW
                        set_country_flag=ETHIC_STOP
                    }
                }
            }
        }
        approach = {
            name = ethic_close_economic
            icon = GFX_situation_approach_this_is_fine
		    icon_background = GFX_situation_approach_bg_red
            modifier = {
				trade_value_mult = -0.10
                pop_happiness = -0.05

                job_merchant_per_pop=-0.03
			}
            on_select={
                
                hidden_effect={
                    
                    owner={
                         remove_country_flag =ETHIC_FREEDOM
                         remove_country_flag =ETHIC_SLOW
                         remove_country_flag =ETHIC_STOP
                         
                    }
                    set_global_flag=ETHIC_DESTROY
                    remove_global_flag=ETHIC_ECONOMIC_CRISIS_SITU
                    set_global_flag=ETHIC_NOT_START_ECONOMIC_CRISIS
                    destroy_situation = this
                }
            }
        }

        on_progress_complete={
            hidden_effect={
                situation_event={
                    unity_deficit.110
                }
            }
        }
        
       
}